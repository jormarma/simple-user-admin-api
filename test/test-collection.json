{
	"info": {
		"_postman_id": "ffcf2ec0-ffac-4bf2-ad14-992d1936c3d2",
		"name": "Simple User API",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Register User",
			"item": [
				{
					"name": "register user (201)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "7969df37-eba4-435d-94b8-c6abfb071542",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the new user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"The user contains an _id\", function () {",
									"    pm.expect(jsonData.result.user).to.have.property('_id');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users"
							]
						}
					},
					"response": [
						{
							"name": "/users (201)",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "286"
								},
								{
									"key": "ETag",
									"value": "W/\"11e-xxrE407XvaHIXIsjDfFtWyCCCKU\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 03:18:33 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"user\": {\n            \"firstName\": \"John\",\n            \"lastName\": \"Doe\",\n            \"email\": \"john.doe@test.com\",\n            \"password\": \"$2b$12$jCkDHSWtwJ4pAJWValyIHebM.ufcOrthPZZjv5un9uFV4DjKv08lC\",\n            \"role\": \"user\",\n            \"country\": \"Unknown\",\n            \"phoneNumber\": \"+34555555555\",\n            \"postalCode\": \"12345\",\n            \"_id\": \"5f320e097911461f92c9ce2f\"\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "register the same user (403)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "7216623c-2649-4b3f-8cda-a726c40597af",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 403\", function () {",
									"    pm.response.to.have.status(403);",
									"});",
									"",
									"pm.test(\"It is an error response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(false);",
									"});",
									"",
									"pm.test(\"It has an error message\", function () {",
									"    pm.expect(jsonData.error).to.be.a('string');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users"
							]
						}
					},
					"response": [
						{
							"name": "/users (403)",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users"
									]
								}
							},
							"status": "Forbidden",
							"code": 403,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "79"
								},
								{
									"key": "ETag",
									"value": "W/\"4f-GopY7aQzjER+CQ/oOCRSXNb7Phg\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 03:16:47 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"A user with the email 'john.doe@test.com' already exists\"\n}"
						}
					]
				},
				{
					"name": "register admin user (401)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "203c62fc-8287-4121-86f4-1ebb5a4ca0d2",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 401\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"pm.test(\"It is an error response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(false);",
									"});",
									"",
									"pm.test(\"It has an error message\", function () {",
									"    pm.expect(jsonData.error).to.be.a('string');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"John2\",\n    \"lastName\": \"Doe2\",\n    \"email\": \"john2.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"role\": \"admin\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users"
							]
						}
					},
					"response": [
						{
							"name": "/users (401)",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"role\": \"admin\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users"
									]
								}
							},
							"status": "Unauthorized",
							"code": 401,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "92"
								},
								{
									"key": "ETag",
									"value": "W/\"5c-gBEflpF//oYwbTv/2jooFCvuEcM\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 03:20:08 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"You need to be an 'Administrator' to register another 'Administrator'\"\n}"
						}
					]
				},
				{
					"name": "register invalid user (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "fc5962bb-7651-4d59-bdd4-4b4295ec8c05",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"It is an error response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(false);",
									"});",
									"",
									"pm.test(\"It has validation errors\", function () {",
									"    pm.expect(jsonData.error.validationErrors).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users"
							]
						}
					},
					"response": [
						{
							"name": "register user 201",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "286"
								},
								{
									"key": "ETag",
									"value": "W/\"11e-HvW6fHElqDW3ztxQWHWXDtxS45w\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:41:53 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"user\": {\n            \"firstName\": \"John\",\n            \"lastName\": \"Doe\",\n            \"email\": \"john.doe@test.com\",\n            \"password\": \"$2b$12$W5ECgPNdRY6HCd3VkskwfuurlKZXwcIvLvRWsC/e/rdJaLolc0kLO\",\n            \"role\": \"user\",\n            \"country\": \"Unknown\",\n            \"phoneNumber\": \"+34555555555\",\n            \"postalCode\": \"12345\",\n            \"_id\": \"5f3205717911461f92c9ce25\"\n        }\n    }\n}"
						},
						{
							"name": "register user 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"firstName\": \"\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "211"
								},
								{
									"key": "ETag",
									"value": "W/\"d3-a8ioadyoehqtxIW//Rn0nnDN+o0\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:43:21 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": {\n        \"validationErrors\": [\n            {\n                \"keyword\": \"minLength\",\n                \"dataPath\": \".firstName\",\n                \"schemaPath\": \"definitions.json#name/minLength\",\n                \"params\": {\n                    \"limit\": 1\n                },\n                \"message\": \"should NOT be shorter than 1 characters\"\n            }\n        ]\n    }\n}"
						},
						{
							"name": "register user 403",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users"
									]
								}
							},
							"status": "Forbidden",
							"code": 403,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "79"
								},
								{
									"key": "ETag",
									"value": "W/\"4f-GopY7aQzjER+CQ/oOCRSXNb7Phg\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:42:31 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"A user with the email 'john.doe@test.com' already exists\"\n}"
						}
					]
				},
				{
					"name": "login (200)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "97992e50-6727-482c-bb88-931accdd7ef9",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Set values to the environment",
									"if(jsonData.ok) {",
									"    pm.environment.set(\"userid\", jsonData.result.user._id);",
									"}",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the logged in user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"The user contains an _id\", function () {",
									"    pm.expect(jsonData.result.user).to.have.property('_id');",
									"});",
									"",
									"pm.test(\"It has a session cookie\", function () {",
									"    pm.expect(pm.cookies.has('connect.sid')).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/login",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"login"
							]
						}
					},
					"response": [
						{
							"name": "login 200",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "286"
								},
								{
									"key": "ETag",
									"value": "W/\"11e-S6czkYNuqr4Bwdt9+5R4JtMzgaY\""
								},
								{
									"key": "Set-Cookie",
									"value": "connect.sid=s%3AcroOZjYO91a2eZ89xqBmd8TK0YPv3Nrn.dqNum5HzP49ppWFyDVdIJoZN2HbAoX15yNEXwE5Ub7M; Path=/; HttpOnly"
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:46:48 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"user\": {\n            \"_id\": \"5f3206927911461f92c9ce27\",\n            \"firstName\": \"John\",\n            \"lastName\": \"Doe\",\n            \"email\": \"john.doe@test.com\",\n            \"password\": \"$2b$12$Bz.K9fQy1H5/4k/f6c3fQuN095X5C9fwscpxG0zjEUdnvswb0t2C2\",\n            \"role\": \"user\",\n            \"country\": \"Unknown\",\n            \"phoneNumber\": \"+34555555555\",\n            \"postalCode\": \"12345\"\n        }\n    }\n}"
						},
						{
							"name": "login 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "58"
								},
								{
									"key": "ETag",
									"value": "W/\"3a-sZR2yOCuvd0T43BgPxcnqIE2n5w\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:46:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"The email or password are incorrect\"\n}"
						},
						{
							"name": "login 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "507"
								},
								{
									"key": "ETag",
									"value": "W/\"1fb-7a2iogmrx+nHPV8IGckupJO1s2E\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:47:19 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": {\n        \"validationErrors\": [\n            {\n                \"keyword\": \"pattern\",\n                \"dataPath\": \".email\",\n                \"schemaPath\": \"definitions.json#email/pattern\",\n                \"params\": {\n                    \"pattern\": \"^([a-z]|[0-9]|\\\\-|\\\\_|\\\\+|\\\\.)+\\\\@([a-z]|[0-9]){2,}\\\\.[a-z]{2,}(\\\\.[a-z]{2,})?$\"\n                },\n                \"message\": \"should match pattern \\\"^([a-z]|[0-9]|\\\\-|\\\\_|\\\\+|\\\\.)+\\\\@([a-z]|[0-9]){2,}\\\\.[a-z]{2,}(\\\\.[a-z]{2,})?$\\\"\"\n            },\n            {\n                \"keyword\": \"format\",\n                \"dataPath\": \".email\",\n                \"schemaPath\": \"definitions.json#email/format\",\n                \"params\": {\n                    \"format\": \"email\"\n                },\n                \"message\": \"should match format \\\"email\\\"\"\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "delete loged in user",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b9ccf901-98a1-47ee-9c55-f3d12c47cff1",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"The number of deleted users is 1\", function () {",
									"    pm.expect(jsonData.result.deletedUsers).to.eql(1);",
									"});",
									"",
									"// clear current userid",
									"pm.environment.unset(\"userid\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users",
								":userid"
							],
							"variable": [
								{
									"key": "userid",
									"value": "{{userid}}"
								}
							]
						}
					},
					"response": [
						{
							"name": "delete 401",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "Unauthorized",
							"code": 401,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "70"
								},
								{
									"key": "ETag",
									"value": "W/\"46-nC15ZbMXc2BlUoHYXvUox50svfk\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:26 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"You need to be logged in to execute this action\"\n}"
						},
						{
							"name": "delete 200",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "39"
								},
								{
									"key": "ETag",
									"value": "W/\"27-NHCFJgnYlCS4Y5iaRmYQ9bhso24\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"deletedUsers\": 1\n    }\n}"
						}
					]
				}
			],
			"description": "Happy path for a user.\n1. Register a user.\n2. Login with the new user.\n3. Update the information of the user.\n4. Delete the user.",
			"protocolProfileBehavior": {}
		},
		{
			"name": "Login / Logout",
			"item": [
				{
					"name": "login without email (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c0d3c749-0226-4694-82ed-f451f766217b",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"It is an error response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(false);",
									"});",
									"",
									"pm.test(\"It has validation errors\", function () {",
									"    pm.expect(jsonData.error.validationErrors).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Errors are email format errors\", function () {",
									"    pm.expect(jsonData.error.validationErrors[0].dataPath).to.eql('.email');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"\",\n    \"password\": \"J0hn.D03\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/login",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"login"
							]
						}
					},
					"response": [
						{
							"name": "login 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "58"
								},
								{
									"key": "ETag",
									"value": "W/\"3a-sZR2yOCuvd0T43BgPxcnqIE2n5w\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:46:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"The email or password are incorrect\"\n}"
						},
						{
							"name": "login 200",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "286"
								},
								{
									"key": "ETag",
									"value": "W/\"11e-S6czkYNuqr4Bwdt9+5R4JtMzgaY\""
								},
								{
									"key": "Set-Cookie",
									"value": "connect.sid=s%3AcroOZjYO91a2eZ89xqBmd8TK0YPv3Nrn.dqNum5HzP49ppWFyDVdIJoZN2HbAoX15yNEXwE5Ub7M; Path=/; HttpOnly"
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:46:48 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"user\": {\n            \"_id\": \"5f3206927911461f92c9ce27\",\n            \"firstName\": \"John\",\n            \"lastName\": \"Doe\",\n            \"email\": \"john.doe@test.com\",\n            \"password\": \"$2b$12$Bz.K9fQy1H5/4k/f6c3fQuN095X5C9fwscpxG0zjEUdnvswb0t2C2\",\n            \"role\": \"user\",\n            \"country\": \"Unknown\",\n            \"phoneNumber\": \"+34555555555\",\n            \"postalCode\": \"12345\"\n        }\n    }\n}"
						},
						{
							"name": "login 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "507"
								},
								{
									"key": "ETag",
									"value": "W/\"1fb-7a2iogmrx+nHPV8IGckupJO1s2E\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:47:19 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": {\n        \"validationErrors\": [\n            {\n                \"keyword\": \"pattern\",\n                \"dataPath\": \".email\",\n                \"schemaPath\": \"definitions.json#email/pattern\",\n                \"params\": {\n                    \"pattern\": \"^([a-z]|[0-9]|\\\\-|\\\\_|\\\\+|\\\\.)+\\\\@([a-z]|[0-9]){2,}\\\\.[a-z]{2,}(\\\\.[a-z]{2,})?$\"\n                },\n                \"message\": \"should match pattern \\\"^([a-z]|[0-9]|\\\\-|\\\\_|\\\\+|\\\\.)+\\\\@([a-z]|[0-9]){2,}\\\\.[a-z]{2,}(\\\\.[a-z]{2,})?$\\\"\"\n            },\n            {\n                \"keyword\": \"format\",\n                \"dataPath\": \".email\",\n                \"schemaPath\": \"definitions.json#email/format\",\n                \"params\": {\n                    \"format\": \"email\"\n                },\n                \"message\": \"should match format \\\"email\\\"\"\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "login non existing user (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "7f70524b-5475-4c83-b834-b18cfb204bb6",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"It is an error response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(false);",
									"});",
									"",
									"pm.test(\"It has an error message\", function () {",
									"    pm.expect(jsonData.error).to.be.a('string');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/login",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"login"
							]
						}
					},
					"response": [
						{
							"name": "login 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "507"
								},
								{
									"key": "ETag",
									"value": "W/\"1fb-7a2iogmrx+nHPV8IGckupJO1s2E\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:47:19 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": {\n        \"validationErrors\": [\n            {\n                \"keyword\": \"pattern\",\n                \"dataPath\": \".email\",\n                \"schemaPath\": \"definitions.json#email/pattern\",\n                \"params\": {\n                    \"pattern\": \"^([a-z]|[0-9]|\\\\-|\\\\_|\\\\+|\\\\.)+\\\\@([a-z]|[0-9]){2,}\\\\.[a-z]{2,}(\\\\.[a-z]{2,})?$\"\n                },\n                \"message\": \"should match pattern \\\"^([a-z]|[0-9]|\\\\-|\\\\_|\\\\+|\\\\.)+\\\\@([a-z]|[0-9]){2,}\\\\.[a-z]{2,}(\\\\.[a-z]{2,})?$\\\"\"\n            },\n            {\n                \"keyword\": \"format\",\n                \"dataPath\": \".email\",\n                \"schemaPath\": \"definitions.json#email/format\",\n                \"params\": {\n                    \"format\": \"email\"\n                },\n                \"message\": \"should match format \\\"email\\\"\"\n            }\n        ]\n    }\n}"
						},
						{
							"name": "login 200",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "286"
								},
								{
									"key": "ETag",
									"value": "W/\"11e-S6czkYNuqr4Bwdt9+5R4JtMzgaY\""
								},
								{
									"key": "Set-Cookie",
									"value": "connect.sid=s%3AcroOZjYO91a2eZ89xqBmd8TK0YPv3Nrn.dqNum5HzP49ppWFyDVdIJoZN2HbAoX15yNEXwE5Ub7M; Path=/; HttpOnly"
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:46:48 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"user\": {\n            \"_id\": \"5f3206927911461f92c9ce27\",\n            \"firstName\": \"John\",\n            \"lastName\": \"Doe\",\n            \"email\": \"john.doe@test.com\",\n            \"password\": \"$2b$12$Bz.K9fQy1H5/4k/f6c3fQuN095X5C9fwscpxG0zjEUdnvswb0t2C2\",\n            \"role\": \"user\",\n            \"country\": \"Unknown\",\n            \"phoneNumber\": \"+34555555555\",\n            \"postalCode\": \"12345\"\n        }\n    }\n}"
						},
						{
							"name": "login 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "58"
								},
								{
									"key": "ETag",
									"value": "W/\"3a-sZR2yOCuvd0T43BgPxcnqIE2n5w\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:46:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"The email or password are incorrect\"\n}"
						}
					]
				},
				{
					"name": "register new user (201)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "0326f756-cec8-4f0b-a5b3-3851f6cc338c",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the new user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"The user contains an _id\", function () {",
									"    pm.expect(jsonData.result.user).to.have.property('_id');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users"
							]
						}
					},
					"response": [
						{
							"name": "/users (201)",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "286"
								},
								{
									"key": "ETag",
									"value": "W/\"11e-xxrE407XvaHIXIsjDfFtWyCCCKU\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 03:18:33 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"user\": {\n            \"firstName\": \"John\",\n            \"lastName\": \"Doe\",\n            \"email\": \"john.doe@test.com\",\n            \"password\": \"$2b$12$jCkDHSWtwJ4pAJWValyIHebM.ufcOrthPZZjv5un9uFV4DjKv08lC\",\n            \"role\": \"user\",\n            \"country\": \"Unknown\",\n            \"phoneNumber\": \"+34555555555\",\n            \"postalCode\": \"12345\",\n            \"_id\": \"5f320e097911461f92c9ce2f\"\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "login (200)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5bb21e39-5821-46e1-9eeb-930e6dad9451",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Set values to the environment",
									"if(jsonData.ok) {",
									"    pm.environment.set(\"userid\", jsonData.result.user._id);",
									"}",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the logged in user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"The user contains an _id\", function () {",
									"    pm.expect(jsonData.result.user).to.have.property('_id');",
									"});",
									"",
									"pm.test(\"It has a session cookie\", function () {",
									"    pm.expect(pm.cookies.has('connect.sid')).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/login",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"login"
							]
						}
					},
					"response": [
						{
							"name": "login 200",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "286"
								},
								{
									"key": "ETag",
									"value": "W/\"11e-S6czkYNuqr4Bwdt9+5R4JtMzgaY\""
								},
								{
									"key": "Set-Cookie",
									"value": "connect.sid=s%3AcroOZjYO91a2eZ89xqBmd8TK0YPv3Nrn.dqNum5HzP49ppWFyDVdIJoZN2HbAoX15yNEXwE5Ub7M; Path=/; HttpOnly"
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:46:48 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"user\": {\n            \"_id\": \"5f3206927911461f92c9ce27\",\n            \"firstName\": \"John\",\n            \"lastName\": \"Doe\",\n            \"email\": \"john.doe@test.com\",\n            \"password\": \"$2b$12$Bz.K9fQy1H5/4k/f6c3fQuN095X5C9fwscpxG0zjEUdnvswb0t2C2\",\n            \"role\": \"user\",\n            \"country\": \"Unknown\",\n            \"phoneNumber\": \"+34555555555\",\n            \"postalCode\": \"12345\"\n        }\n    }\n}"
						},
						{
							"name": "login 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "58"
								},
								{
									"key": "ETag",
									"value": "W/\"3a-sZR2yOCuvd0T43BgPxcnqIE2n5w\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:46:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"The email or password are incorrect\"\n}"
						},
						{
							"name": "login 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "507"
								},
								{
									"key": "ETag",
									"value": "W/\"1fb-7a2iogmrx+nHPV8IGckupJO1s2E\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:47:19 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": {\n        \"validationErrors\": [\n            {\n                \"keyword\": \"pattern\",\n                \"dataPath\": \".email\",\n                \"schemaPath\": \"definitions.json#email/pattern\",\n                \"params\": {\n                    \"pattern\": \"^([a-z]|[0-9]|\\\\-|\\\\_|\\\\+|\\\\.)+\\\\@([a-z]|[0-9]){2,}\\\\.[a-z]{2,}(\\\\.[a-z]{2,})?$\"\n                },\n                \"message\": \"should match pattern \\\"^([a-z]|[0-9]|\\\\-|\\\\_|\\\\+|\\\\.)+\\\\@([a-z]|[0-9]){2,}\\\\.[a-z]{2,}(\\\\.[a-z]{2,})?$\\\"\"\n            },\n            {\n                \"keyword\": \"format\",\n                \"dataPath\": \".email\",\n                \"schemaPath\": \"definitions.json#email/format\",\n                \"params\": {\n                    \"format\": \"email\"\n                },\n                \"message\": \"should match format \\\"email\\\"\"\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "login already being loged in (202)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "84a3b882-8c6d-4c01-8c54-7b6da8fd2e2d",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 202\", function () {",
									"    pm.response.to.have.status(202);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has a result message\", function () {",
									"    pm.expect(jsonData.result).to.be.a('string');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/login",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"login"
							]
						}
					},
					"response": [
						{
							"name": "login 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "58"
								},
								{
									"key": "ETag",
									"value": "W/\"3a-sZR2yOCuvd0T43BgPxcnqIE2n5w\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:46:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"The email or password are incorrect\"\n}"
						},
						{
							"name": "login 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "507"
								},
								{
									"key": "ETag",
									"value": "W/\"1fb-7a2iogmrx+nHPV8IGckupJO1s2E\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:47:19 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": {\n        \"validationErrors\": [\n            {\n                \"keyword\": \"pattern\",\n                \"dataPath\": \".email\",\n                \"schemaPath\": \"definitions.json#email/pattern\",\n                \"params\": {\n                    \"pattern\": \"^([a-z]|[0-9]|\\\\-|\\\\_|\\\\+|\\\\.)+\\\\@([a-z]|[0-9]){2,}\\\\.[a-z]{2,}(\\\\.[a-z]{2,})?$\"\n                },\n                \"message\": \"should match pattern \\\"^([a-z]|[0-9]|\\\\-|\\\\_|\\\\+|\\\\.)+\\\\@([a-z]|[0-9]){2,}\\\\.[a-z]{2,}(\\\\.[a-z]{2,})?$\\\"\"\n            },\n            {\n                \"keyword\": \"format\",\n                \"dataPath\": \".email\",\n                \"schemaPath\": \"definitions.json#email/format\",\n                \"params\": {\n                    \"format\": \"email\"\n                },\n                \"message\": \"should match format \\\"email\\\"\"\n            }\n        ]\n    }\n}"
						},
						{
							"name": "login 200",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "286"
								},
								{
									"key": "ETag",
									"value": "W/\"11e-S6czkYNuqr4Bwdt9+5R4JtMzgaY\""
								},
								{
									"key": "Set-Cookie",
									"value": "connect.sid=s%3AcroOZjYO91a2eZ89xqBmd8TK0YPv3Nrn.dqNum5HzP49ppWFyDVdIJoZN2HbAoX15yNEXwE5Ub7M; Path=/; HttpOnly"
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:46:48 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"user\": {\n            \"_id\": \"5f3206927911461f92c9ce27\",\n            \"firstName\": \"John\",\n            \"lastName\": \"Doe\",\n            \"email\": \"john.doe@test.com\",\n            \"password\": \"$2b$12$Bz.K9fQy1H5/4k/f6c3fQuN095X5C9fwscpxG0zjEUdnvswb0t2C2\",\n            \"role\": \"user\",\n            \"country\": \"Unknown\",\n            \"phoneNumber\": \"+34555555555\",\n            \"postalCode\": \"12345\"\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "delete loged in user",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "18c3df55-f65d-49c3-a014-4c3b1eedef21",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"The number of deleted users is 1\", function () {",
									"    pm.expect(jsonData.result.deletedUsers).to.eql(1);",
									"});",
									"",
									"// clear current userid",
									"pm.environment.unset(\"userid\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users",
								":userid"
							],
							"variable": [
								{
									"key": "userid",
									"value": "{{userid}}"
								}
							]
						}
					},
					"response": [
						{
							"name": "delete 401",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "Unauthorized",
							"code": 401,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "70"
								},
								{
									"key": "ETag",
									"value": "W/\"46-nC15ZbMXc2BlUoHYXvUox50svfk\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:26 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"You need to be logged in to execute this action\"\n}"
						},
						{
							"name": "delete 200",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "39"
								},
								{
									"key": "ETag",
									"value": "W/\"27-NHCFJgnYlCS4Y5iaRmYQ9bhso24\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"deletedUsers\": 1\n    }\n}"
						}
					]
				}
			],
			"description": "Happy path for a user.\n1. Register a user.\n2. Login with the new user.\n3. Update the information of the user.\n4. Delete the user.",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "5d14cd20-bfcf-4497-afcf-2f187be5433e",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "1c2dee54-7c2c-4ca6-ae51-3e93e22736a6",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Update User",
			"item": [
				{
					"name": "register new user (201)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9032672a-bd34-4661-9979-16e5b0979177",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the new user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"The user contains an _id\", function () {",
									"    pm.expect(jsonData.result.user).to.have.property('_id');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users"
							]
						}
					},
					"response": [
						{
							"name": "/users (201)",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "286"
								},
								{
									"key": "ETag",
									"value": "W/\"11e-xxrE407XvaHIXIsjDfFtWyCCCKU\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 03:18:33 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"user\": {\n            \"firstName\": \"John\",\n            \"lastName\": \"Doe\",\n            \"email\": \"john.doe@test.com\",\n            \"password\": \"$2b$12$jCkDHSWtwJ4pAJWValyIHebM.ufcOrthPZZjv5un9uFV4DjKv08lC\",\n            \"role\": \"user\",\n            \"country\": \"Unknown\",\n            \"phoneNumber\": \"+34555555555\",\n            \"postalCode\": \"12345\",\n            \"_id\": \"5f320e097911461f92c9ce2f\"\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "update invalid data (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "cfe4b4b3-b0b6-4bee-b9b9-43021e453d98",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"It is an error response\", function () {",
									"    pm.expect(jsonData.ok).to.be.false",
									"});",
									"",
									"pm.test(\"It has validation errors\", function () {",
									"    pm.expect(jsonData.error.validationErrors).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"\",\n    \"lastName\": \"Gone2\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"newPassword\": \"J0hn.D032\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-56\",\n    \"postalCode\": \"12346\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users",
								":userid"
							],
							"variable": [
								{
									"key": "userid",
									"type": "string",
									"value": "{{userid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "update withour login (401)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f459c0a2-6748-4c1d-bd43-65dbd4933955",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 401\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"pm.test(\"It is an error response\", function () {",
									"    pm.expect(jsonData.ok).to.be.false",
									"});",
									"",
									"pm.test(\"It has an error message\", function () {",
									"    pm.expect(jsonData.error).to.be.a('string');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"John2\",\n    \"lastName\": \"Gone2\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"newPassword\": \"J0hn2.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-56\",\n    \"postalCode\": \"12346\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users",
								":userid"
							],
							"variable": [
								{
									"key": "userid",
									"type": "string",
									"value": "{{userid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "login (200)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b6fde6f8-b322-406c-8ba5-f6e407ea77aa",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Set values to the environment",
									"if(jsonData.ok) {",
									"    pm.environment.set(\"userid\", jsonData.result.user._id);",
									"}",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the logged in user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"The user contains an _id\", function () {",
									"    pm.expect(jsonData.result.user).to.have.property('_id');",
									"});",
									"",
									"pm.test(\"It has a session cookie\", function () {",
									"    pm.expect(pm.cookies.has('connect.sid')).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/login",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"login"
							]
						}
					},
					"response": [
						{
							"name": "login 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "507"
								},
								{
									"key": "ETag",
									"value": "W/\"1fb-7a2iogmrx+nHPV8IGckupJO1s2E\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:47:19 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": {\n        \"validationErrors\": [\n            {\n                \"keyword\": \"pattern\",\n                \"dataPath\": \".email\",\n                \"schemaPath\": \"definitions.json#email/pattern\",\n                \"params\": {\n                    \"pattern\": \"^([a-z]|[0-9]|\\\\-|\\\\_|\\\\+|\\\\.)+\\\\@([a-z]|[0-9]){2,}\\\\.[a-z]{2,}(\\\\.[a-z]{2,})?$\"\n                },\n                \"message\": \"should match pattern \\\"^([a-z]|[0-9]|\\\\-|\\\\_|\\\\+|\\\\.)+\\\\@([a-z]|[0-9]){2,}\\\\.[a-z]{2,}(\\\\.[a-z]{2,})?$\\\"\"\n            },\n            {\n                \"keyword\": \"format\",\n                \"dataPath\": \".email\",\n                \"schemaPath\": \"definitions.json#email/format\",\n                \"params\": {\n                    \"format\": \"email\"\n                },\n                \"message\": \"should match format \\\"email\\\"\"\n            }\n        ]\n    }\n}"
						},
						{
							"name": "login 200",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "286"
								},
								{
									"key": "ETag",
									"value": "W/\"11e-S6czkYNuqr4Bwdt9+5R4JtMzgaY\""
								},
								{
									"key": "Set-Cookie",
									"value": "connect.sid=s%3AcroOZjYO91a2eZ89xqBmd8TK0YPv3Nrn.dqNum5HzP49ppWFyDVdIJoZN2HbAoX15yNEXwE5Ub7M; Path=/; HttpOnly"
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:46:48 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"user\": {\n            \"_id\": \"5f3206927911461f92c9ce27\",\n            \"firstName\": \"John\",\n            \"lastName\": \"Doe\",\n            \"email\": \"john.doe@test.com\",\n            \"password\": \"$2b$12$Bz.K9fQy1H5/4k/f6c3fQuN095X5C9fwscpxG0zjEUdnvswb0t2C2\",\n            \"role\": \"user\",\n            \"country\": \"Unknown\",\n            \"phoneNumber\": \"+34555555555\",\n            \"postalCode\": \"12345\"\n        }\n    }\n}"
						},
						{
							"name": "login 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "58"
								},
								{
									"key": "ETag",
									"value": "W/\"3a-sZR2yOCuvd0T43BgPxcnqIE2n5w\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:46:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"The email or password are incorrect\"\n}"
						}
					]
				},
				{
					"name": "update invalid password (400)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "707edf21-dd86-4d78-b884-d8067cca23be",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"pm.test(\"It is an error response\", function () {",
									"    pm.expect(jsonData.ok).to.be.false",
									"});",
									"",
									"pm.test(\"It has an error message\", function () {",
									"    pm.expect(jsonData.error).to.be.a('string');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"John2\",\n    \"lastName\": \"Gone2\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn2.D03\",\n    \"newPassword\": \"J0hn2.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-56\",\n    \"postalCode\": \"12346\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users",
								":userid"
							],
							"variable": [
								{
									"key": "userid",
									"type": "string",
									"value": "{{userid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "update (200)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "751d68e7-259c-4303-8dd0-8a56ddf0ba6b",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.be.true",
									"});",
									"",
									"pm.test(\"It has an result user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"The result user contains the modifications\", function () {",
									"    pm.expect(jsonData.result.user.firstName).to.eql('John2');",
									"    pm.expect(jsonData.result.user.lastName).to.eql('Gone2');",
									"    pm.expect(jsonData.result.user.phoneNumber).to.eql('+34555555556');",
									"    pm.expect(jsonData.result.user.postalCode).to.eql('12346');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"John2\",\n    \"lastName\": \"Gone2\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"newPassword\": \"J0hn2.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-56\",\n    \"postalCode\": \"12346\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users",
								":userid"
							],
							"variable": [
								{
									"key": "userid",
									"type": "string",
									"value": "{{userid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "logout",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f244946b-5814-433f-b2c1-2b0f179b251b",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.be.true",
									"});",
									"",
									"// clear current userid",
									"pm.environment.unset(\"userid\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/logout",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"logout"
							]
						}
					},
					"response": []
				},
				{
					"name": "login with new password (200)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f157bbb6-4fd7-44bb-9674-adc8a4a409dd",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Set values to the environment",
									"if(jsonData.ok) {",
									"    pm.environment.set(\"userid\", jsonData.result.user._id);",
									"}",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the logged in user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"It has a session cookie\", function () {",
									"    pm.expect(pm.cookies.has('connect.sid')).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn2.D03\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/login",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"login"
							]
						}
					},
					"response": [
						{
							"name": "login 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "58"
								},
								{
									"key": "ETag",
									"value": "W/\"3a-sZR2yOCuvd0T43BgPxcnqIE2n5w\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:46:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"The email or password are incorrect\"\n}"
						},
						{
							"name": "login 200",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "286"
								},
								{
									"key": "ETag",
									"value": "W/\"11e-S6czkYNuqr4Bwdt9+5R4JtMzgaY\""
								},
								{
									"key": "Set-Cookie",
									"value": "connect.sid=s%3AcroOZjYO91a2eZ89xqBmd8TK0YPv3Nrn.dqNum5HzP49ppWFyDVdIJoZN2HbAoX15yNEXwE5Ub7M; Path=/; HttpOnly"
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:46:48 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"user\": {\n            \"_id\": \"5f3206927911461f92c9ce27\",\n            \"firstName\": \"John\",\n            \"lastName\": \"Doe\",\n            \"email\": \"john.doe@test.com\",\n            \"password\": \"$2b$12$Bz.K9fQy1H5/4k/f6c3fQuN095X5C9fwscpxG0zjEUdnvswb0t2C2\",\n            \"role\": \"user\",\n            \"country\": \"Unknown\",\n            \"phoneNumber\": \"+34555555555\",\n            \"postalCode\": \"12345\"\n        }\n    }\n}"
						},
						{
							"name": "login 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "507"
								},
								{
									"key": "ETag",
									"value": "W/\"1fb-7a2iogmrx+nHPV8IGckupJO1s2E\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:47:19 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": {\n        \"validationErrors\": [\n            {\n                \"keyword\": \"pattern\",\n                \"dataPath\": \".email\",\n                \"schemaPath\": \"definitions.json#email/pattern\",\n                \"params\": {\n                    \"pattern\": \"^([a-z]|[0-9]|\\\\-|\\\\_|\\\\+|\\\\.)+\\\\@([a-z]|[0-9]){2,}\\\\.[a-z]{2,}(\\\\.[a-z]{2,})?$\"\n                },\n                \"message\": \"should match pattern \\\"^([a-z]|[0-9]|\\\\-|\\\\_|\\\\+|\\\\.)+\\\\@([a-z]|[0-9]){2,}\\\\.[a-z]{2,}(\\\\.[a-z]{2,})?$\\\"\"\n            },\n            {\n                \"keyword\": \"format\",\n                \"dataPath\": \".email\",\n                \"schemaPath\": \"definitions.json#email/format\",\n                \"params\": {\n                    \"format\": \"email\"\n                },\n                \"message\": \"should match format \\\"email\\\"\"\n            }\n        ]\n    }\n}"
						}
					]
				},
				{
					"name": "delete",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d97dcc8e-0bbf-44bd-a009-25cc92153525",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"The number of deleted users is 1\", function () {",
									"    pm.expect(jsonData.result.deletedUsers).to.eql(1);",
									"});",
									"",
									"// clear current userid",
									"pm.environment.unset(\"userid\");",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users",
								":userid"
							],
							"variable": [
								{
									"key": "userid",
									"value": "{{userid}}"
								}
							]
						}
					},
					"response": [
						{
							"name": "delete 401",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "Unauthorized",
							"code": 401,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "70"
								},
								{
									"key": "ETag",
									"value": "W/\"46-nC15ZbMXc2BlUoHYXvUox50svfk\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:26 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"You need to be logged in to execute this action\"\n}"
						},
						{
							"name": "delete 200",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "39"
								},
								{
									"key": "ETag",
									"value": "W/\"27-NHCFJgnYlCS4Y5iaRmYQ9bhso24\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"deletedUsers\": 1\n    }\n}"
						}
					]
				}
			],
			"description": "Happy path for a user.\n1. Register a user.\n2. Login with the new user.\n3. Update the information of the user.\n4. Delete the user.",
			"protocolProfileBehavior": {}
		},
		{
			"name": "Delete User",
			"item": [
				{
					"name": "register new user (201)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "269f11ba-8498-4b19-a810-27e9eefd21e0",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the new user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"The user contains an _id\", function () {",
									"    pm.expect(jsonData.result.user).to.have.property('_id');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users"
							]
						}
					},
					"response": [
						{
							"name": "/users (201)",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "286"
								},
								{
									"key": "ETag",
									"value": "W/\"11e-xxrE407XvaHIXIsjDfFtWyCCCKU\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 03:18:33 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"user\": {\n            \"firstName\": \"John\",\n            \"lastName\": \"Doe\",\n            \"email\": \"john.doe@test.com\",\n            \"password\": \"$2b$12$jCkDHSWtwJ4pAJWValyIHebM.ufcOrthPZZjv5un9uFV4DjKv08lC\",\n            \"role\": \"user\",\n            \"country\": \"Unknown\",\n            \"phoneNumber\": \"+34555555555\",\n            \"postalCode\": \"12345\",\n            \"_id\": \"5f320e097911461f92c9ce2f\"\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "delete without login (401)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9111b259-d9a7-49c1-ab2b-db7314bfcfe0",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 401\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"pm.test(\"It is an error response\", function () {",
									"    pm.expect(jsonData.ok).to.be.false;",
									"});",
									"",
									"pm.test(\"It has an error message\", function () {",
									"    pm.expect(jsonData.error).to.be.a('string');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users",
								":userid"
							],
							"variable": [
								{
									"key": "userid",
									"value": "{{userid}}"
								}
							]
						}
					},
					"response": [
						{
							"name": "delete 401",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "Unauthorized",
							"code": 401,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "70"
								},
								{
									"key": "ETag",
									"value": "W/\"46-nC15ZbMXc2BlUoHYXvUox50svfk\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:26 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"You need to be logged in to execute this action\"\n}"
						},
						{
							"name": "delete 200",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "39"
								},
								{
									"key": "ETag",
									"value": "W/\"27-NHCFJgnYlCS4Y5iaRmYQ9bhso24\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"deletedUsers\": 1\n    }\n}"
						}
					]
				},
				{
					"name": "login (200)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "7006d1ce-1ceb-42c4-a663-b72f1ef4d398",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Set values to the environment",
									"if(jsonData.ok) {",
									"    pm.environment.set(\"userid\", jsonData.result.user._id);",
									"}",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the logged in user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/login",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"login"
							]
						}
					},
					"response": [
						{
							"name": "login 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "58"
								},
								{
									"key": "ETag",
									"value": "W/\"3a-sZR2yOCuvd0T43BgPxcnqIE2n5w\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:46:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"The email or password are incorrect\"\n}"
						},
						{
							"name": "login 400",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "507"
								},
								{
									"key": "ETag",
									"value": "W/\"1fb-7a2iogmrx+nHPV8IGckupJO1s2E\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:47:19 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": {\n        \"validationErrors\": [\n            {\n                \"keyword\": \"pattern\",\n                \"dataPath\": \".email\",\n                \"schemaPath\": \"definitions.json#email/pattern\",\n                \"params\": {\n                    \"pattern\": \"^([a-z]|[0-9]|\\\\-|\\\\_|\\\\+|\\\\.)+\\\\@([a-z]|[0-9]){2,}\\\\.[a-z]{2,}(\\\\.[a-z]{2,})?$\"\n                },\n                \"message\": \"should match pattern \\\"^([a-z]|[0-9]|\\\\-|\\\\_|\\\\+|\\\\.)+\\\\@([a-z]|[0-9]){2,}\\\\.[a-z]{2,}(\\\\.[a-z]{2,})?$\\\"\"\n            },\n            {\n                \"keyword\": \"format\",\n                \"dataPath\": \".email\",\n                \"schemaPath\": \"definitions.json#email/format\",\n                \"params\": {\n                    \"format\": \"email\"\n                },\n                \"message\": \"should match format \\\"email\\\"\"\n            }\n        ]\n    }\n}"
						},
						{
							"name": "login 200",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"john.doe@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/login",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"login"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "286"
								},
								{
									"key": "ETag",
									"value": "W/\"11e-S6czkYNuqr4Bwdt9+5R4JtMzgaY\""
								},
								{
									"key": "Set-Cookie",
									"value": "connect.sid=s%3AcroOZjYO91a2eZ89xqBmd8TK0YPv3Nrn.dqNum5HzP49ppWFyDVdIJoZN2HbAoX15yNEXwE5Ub7M; Path=/; HttpOnly"
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:46:48 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"user\": {\n            \"_id\": \"5f3206927911461f92c9ce27\",\n            \"firstName\": \"John\",\n            \"lastName\": \"Doe\",\n            \"email\": \"john.doe@test.com\",\n            \"password\": \"$2b$12$Bz.K9fQy1H5/4k/f6c3fQuN095X5C9fwscpxG0zjEUdnvswb0t2C2\",\n            \"role\": \"user\",\n            \"country\": \"Unknown\",\n            \"phoneNumber\": \"+34555555555\",\n            \"postalCode\": \"12345\"\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "delete (200)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "4eabd0f5-721b-40d6-8444-0ff161cad07b",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"The number of deleted users is 1\", function () {",
									"    pm.expect(jsonData.result.deletedUsers).to.eql(1);",
									"});",
									"",
									"// clear current userid",
									"pm.environment.unset(\"userid\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users",
								":userid"
							],
							"variable": [
								{
									"key": "userid",
									"value": "{{userid}}"
								}
							]
						}
					},
					"response": [
						{
							"name": "delete 401",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "Unauthorized",
							"code": 401,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "70"
								},
								{
									"key": "ETag",
									"value": "W/\"46-nC15ZbMXc2BlUoHYXvUox50svfk\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:26 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"You need to be logged in to execute this action\"\n}"
						},
						{
							"name": "delete 200",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "39"
								},
								{
									"key": "ETag",
									"value": "W/\"27-NHCFJgnYlCS4Y5iaRmYQ9bhso24\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"deletedUsers\": 1\n    }\n}"
						}
					]
				},
				{
					"name": "login Admin (200)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "68ea93d1-f819-46a8-9f34-c63cd9090275",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Set values to the environment",
									"if(jsonData.ok) {",
									"    pm.environment.set(\"userid\", jsonData.result.user._id);",
									"}",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the logged in user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"It has a session cookie\", function () {",
									"    pm.expect(pm.cookies.has('connect.sid')).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"admin@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/login",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "delete last admin user(401)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c3509f9e-bcfc-405b-9711-9e8cf883ea73",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 403\", function () {",
									"    pm.response.to.have.status(403);",
									"});",
									"",
									"pm.test(\"It is an error response\", function () {",
									"    pm.expect(jsonData.ok).to.be.false;",
									"});",
									"",
									"pm.test(\"It has an error message\", function () {",
									"    pm.expect(jsonData.error).to.be.a('string');",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users",
								":userid"
							],
							"variable": [
								{
									"key": "userid",
									"value": "{{userid}}"
								}
							]
						}
					},
					"response": [
						{
							"name": "delete 200",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "39"
								},
								{
									"key": "ETag",
									"value": "W/\"27-NHCFJgnYlCS4Y5iaRmYQ9bhso24\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"deletedUsers\": 1\n    }\n}"
						},
						{
							"name": "delete 401",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "Unauthorized",
							"code": 401,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "70"
								},
								{
									"key": "ETag",
									"value": "W/\"46-nC15ZbMXc2BlUoHYXvUox50svfk\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:26 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"You need to be logged in to execute this action\"\n}"
						}
					]
				},
				{
					"name": "logout",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f864326b-2548-423b-be8f-4c7ebb0780a7",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.be.true",
									"});",
									"",
									"pm.environment.unset(\"userid\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/logout",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"logout"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "List users",
			"item": [
				{
					"name": "login Admin (200)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d0758734-e2b8-4c4c-a058-c3633d2aa44d",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Set values to the environment",
									"if(jsonData.ok) {",
									"    pm.environment.set(\"userid\", jsonData.result.user._id);",
									"}",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the logged in user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"admin@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/login",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "list users",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "4c8f1288-c800-45e4-bc1e-12154ce4e3a5",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has a list of users\", function () {",
									"    pm.expect(jsonData.result.users).to.be.an('array');",
									"});",
									"",
									"pm.test(\"It has a list 1 user\", function () {",
									"    pm.expect(jsonData.result.users).to.have.lengthOf(1);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "register new user",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d4d93424-a2b7-4142-926c-c4f6a67ab05b",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the new user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"The user contains an _id\", function () {",
									"    pm.expect(jsonData.result.user).to.have.property('_id');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"Jane\",\n    \"lastName\": \"Gone\",\n    \"email\": \"jane.gone@test.com\",\n    \"password\": \"J4n3.G0n3\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "list users",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "81e7cd0b-8372-479a-b5b1-acc8f51d2b7a",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has a list of users\", function () {",
									"    pm.expect(jsonData.result.users).to.be.an('array');",
									"});",
									"",
									"pm.test(\"It has a list 2 users\", function () {",
									"    pm.expect(jsonData.result.users).to.have.lengthOf(2);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "logout",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "1bfcf9a7-0067-4e1e-89b2-ead8410a46d1",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.be.true",
									"});",
									"",
									"// clear current userid",
									"pm.environment.unset(\"userid\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/logout",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"logout"
							]
						}
					},
					"response": []
				},
				{
					"name": "login new regular user (200)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "6cc0cd53-b97d-44cf-bcf8-a6e9243e942c",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Set values to the environment",
									"if(jsonData.ok) {",
									"    pm.environment.set(\"userid\", jsonData.result.user._id);",
									"}",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the logged in user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"The user contains an _id\", function () {",
									"    pm.expect(jsonData.result.user).to.have.property('_id');",
									"});",
									"",
									"pm.test(\"It has a session cookie\", function () {",
									"    pm.expect(pm.cookies.has('connect.sid')).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n   \"email\": \"jane.gone@test.com\",\n    \"password\": \"J4n3.G0n3\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/login",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "list users not being admin  (401)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "811883f8-fd57-4aa2-908e-4fbfcc7aa5d4",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 401\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"pm.test(\"It is an error response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(false);",
									"});",
									"",
									"pm.test(\"It has an error message\", function () {",
									"    pm.expect(jsonData.error).to.be.a('string');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "delete (200)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "8fa7d4d4-8750-4650-b6ac-7614db064c6c",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"The number of deleted users is 1\", function () {",
									"    pm.expect(jsonData.result.deletedUsers).to.eql(1);",
									"});",
									"",
									"// clear current userid",
									"pm.environment.unset(\"userid\");",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users",
								":userid"
							],
							"variable": [
								{
									"id": "d35dd971-8118-4bb0-826f-53f1546a20b6",
									"key": "userid",
									"type": "string",
									"value": "{{userid}}"
								}
							]
						}
					},
					"response": [
						{
							"name": "delete 401",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "Unauthorized",
							"code": 401,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "70"
								},
								{
									"key": "ETag",
									"value": "W/\"46-nC15ZbMXc2BlUoHYXvUox50svfk\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:26 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"You need to be logged in to execute this action\"\n}"
						},
						{
							"name": "delete 200",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "39"
								},
								{
									"key": "ETag",
									"value": "W/\"27-NHCFJgnYlCS4Y5iaRmYQ9bhso24\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"deletedUsers\": 1\n    }\n}"
						}
					]
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Update user to admin role",
			"item": [
				{
					"name": "login Admin (200)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "0f15422b-1871-4dac-84d8-c141c4964bc2",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Set values to the environment",
									"if(jsonData.ok) {",
									"    pm.environment.set(\"userid\", jsonData.result.user._id);",
									"}",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the logged in user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"admin@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/login",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "register new regular user (201)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "6870fa09-ef19-432f-8e12-a401ad6ebe98",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Set values to the environment",
									"if(jsonData.ok) {",
									"    pm.environment.set(\"_id\", jsonData.result.user._id);",
									"}",
									"",
									"// Test the result",
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the new user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"The user contains an _id\", function () {",
									"    pm.expect(jsonData.result.user).to.have.property('_id');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"Jane\",\n    \"lastName\": \"Gone\",\n    \"email\": \"jane.gone@test.com\",\n    \"password\": \"J4n3.G0n3\",\n    \"role\": \"user\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "update user to Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8cf280f-0bb3-40cd-9bdc-6df41fcf1316",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.be.true",
									"});",
									"",
									"pm.test(\"It has an result user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"The result user becomes an admin user\", function () {",
									"    pm.expect(jsonData.result.user.role).to.eql('admin');",
									"});",
									"",
									"pm.environment.unset(\"_id\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"role\": \"admin\",\n    \"_id\": \"{{_id}}\",\n    \"password\": \"J4n3.G0n3\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users",
								":userid"
							],
							"variable": [
								{
									"key": "userid",
									"type": "string",
									"value": "{{userid}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "logout admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "dcee35b3-77e9-4402-8291-93cff25653d0",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.be.true",
									"});",
									"",
									"// clear current userid",
									"pm.environment.unset(\"userid\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/logout",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"logout"
							]
						}
					},
					"response": []
				},
				{
					"name": "login new admin user (200)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b5e1deec-976a-4f1c-83db-8d375e487529",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Set values to the environment",
									"if(jsonData.ok) {",
									"    pm.environment.set(\"userid\", jsonData.result.user._id);",
									"}",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the logged in user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"The user contains an _id\", function () {",
									"    pm.expect(jsonData.result.user).to.have.property('_id');",
									"});",
									"",
									"pm.test(\"It has a session cookie\", function () {",
									"    pm.expect(pm.cookies.has('connect.sid')).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n   \"email\": \"jane.gone@test.com\",\n    \"password\": \"J4n3.G0n3\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/login",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "delete admin being more than one (200)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a1ce56a1-4f9e-4836-8d10-ec26362d1b66",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"The number of deleted users is 1\", function () {",
									"    pm.expect(jsonData.result.deletedUsers).to.eql(1);",
									"});",
									"",
									"// clear current userid",
									"pm.environment.unset(\"userid\");",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users",
								":userid"
							],
							"variable": [
								{
									"id": "d35dd971-8118-4bb0-826f-53f1546a20b6",
									"key": "userid",
									"type": "string",
									"value": "{{userid}}"
								}
							]
						}
					},
					"response": [
						{
							"name": "delete 401",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "Unauthorized",
							"code": 401,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "70"
								},
								{
									"key": "ETag",
									"value": "W/\"46-nC15ZbMXc2BlUoHYXvUox50svfk\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:26 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"You need to be logged in to execute this action\"\n}"
						},
						{
							"name": "delete 200",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "39"
								},
								{
									"key": "ETag",
									"value": "W/\"27-NHCFJgnYlCS4Y5iaRmYQ9bhso24\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"deletedUsers\": 1\n    }\n}"
						}
					]
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Create admin user",
			"item": [
				{
					"name": "login Admin (200)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e70f104a-6262-4d53-8c02-6f15abaa168e",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Set values to the environment",
									"if(jsonData.ok) {",
									"    pm.environment.set(\"userid\", jsonData.result.user._id);",
									"}",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the logged in user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"admin@test.com\",\n    \"password\": \"J0hn.D03\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/login",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "register user admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "deac0ec1-8c61-4ea9-bd93-30feeaae71ce",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the new user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"The user contains an _id\", function () {",
									"    pm.expect(jsonData.result.user).to.have.property('_id');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firstName\": \"Jane\",\n    \"lastName\": \"Gone\",\n    \"email\": \"jane.gone@test.com\",\n    \"password\": \"J4n3.G0n3\",\n    \"role\": \"admin\",\n    \"country\": \"Unknown\",\n    \"phoneNumber\": \"+34 555-55-55-55\",\n    \"postalCode\": \"12345\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "logout",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "82554268-c183-4ea8-998e-c241d3699952",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.be.true",
									"});",
									"",
									"// clear current userid",
									"pm.environment.unset(\"userid\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/logout",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"logout"
							]
						}
					},
					"response": []
				},
				{
					"name": "login new admin user",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "4e6580ff-a76f-4cee-be6f-a6ac58c731dc",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Set values to the environment",
									"if(jsonData.ok) {",
									"    pm.environment.set(\"userid\", jsonData.result.user._id);",
									"}",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has the logged in user\", function () {",
									"    pm.expect(jsonData.result.user).to.be.an('object');",
									"});",
									"",
									"pm.test(\"The user contains an _id\", function () {",
									"    pm.expect(jsonData.result.user).to.have.property('_id');",
									"});",
									"",
									"pm.test(\"It has a session cookie\", function () {",
									"    pm.expect(pm.cookies.has('connect.sid')).to.be.true;",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n   \"email\": \"jane.gone@test.com\",\n    \"password\": \"J4n3.G0n3\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/login",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "list users",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "1ec48220-aef9-4134-89fb-24be799ff2b5",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"It has a list of users\", function () {",
									"    pm.expect(jsonData.result.users).to.be.an('array');",
									"});",
									"",
									"pm.test(\"It has a list 2 users\", function () {",
									"    pm.expect(jsonData.result.users).to.have.lengthOf(2);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "delete (200)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "edaf2b74-eea7-4127-8399-107a23c2ec2d",
								"exec": [
									"// Get the body and transform to JSON",
									"const jsonData = pm.response.json();",
									"",
									"// Test the result",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"It is an ok response\", function () {",
									"    pm.expect(jsonData.ok).to.eql(true);",
									"});",
									"",
									"pm.test(\"The number of deleted users is 1\", function () {",
									"    pm.expect(jsonData.result.deletedUsers).to.eql(1);",
									"});",
									"",
									"// clear current userid",
									"pm.environment.unset(\"userid\");",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
							"protocol": "http",
							"host": [
								"{{host}}"
							],
							"port": "{{port}}",
							"path": [
								"userapi",
								"v1",
								"users",
								":userid"
							],
							"variable": [
								{
									"id": "d35dd971-8118-4bb0-826f-53f1546a20b6",
									"key": "userid",
									"type": "string",
									"value": "{{userid}}"
								}
							]
						}
					},
					"response": [
						{
							"name": "delete 200",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "39"
								},
								{
									"key": "ETag",
									"value": "W/\"27-NHCFJgnYlCS4Y5iaRmYQ9bhso24\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:02 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": true,\n    \"result\": {\n        \"deletedUsers\": 1\n    }\n}"
						},
						{
							"name": "delete 401",
							"originalRequest": {
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "http://{{host}}:{{port}}/userapi/v1/users/:userid",
									"protocol": "http",
									"host": [
										"{{host}}"
									],
									"port": "{{port}}",
									"path": [
										"userapi",
										"v1",
										"users",
										":userid"
									],
									"variable": [
										{
											"key": "userid",
											"value": "{{userid}}"
										}
									]
								}
							},
							"status": "Unauthorized",
							"code": 401,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "X-Powered-By",
									"value": "Express"
								},
								{
									"key": "Content-Type",
									"value": "text/json; charset=utf-8"
								},
								{
									"key": "Content-Length",
									"value": "70"
								},
								{
									"key": "ETag",
									"value": "W/\"46-nC15ZbMXc2BlUoHYXvUox50svfk\""
								},
								{
									"key": "Date",
									"value": "Tue, 11 Aug 2020 02:58:26 GMT"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								}
							],
							"cookie": [],
							"body": "{\n    \"ok\": false,\n    \"error\": \"You need to be logged in to execute this action\"\n}"
						}
					]
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"protocolProfileBehavior": {}
}